<div ng-controller="ReactJsonEditorController as vm">
    <div id="react-json-editor-root"></div>
  </div>
  
  <script src="https://unpkg.com/react@17/umd/react.production.min.js"></script>
  <script src="https://unpkg.com/react-dom@17/umd/react-dom.production.min.js"></script>
  
  <script>
    // Minimal Angular controller that passes model.value to React
    angular.module("umbraco").controller("ReactJsonEditorController", function($scope) {
  
      // Called each time the property loads or changes
      function init() {
        let parsedData = { answers: [] };
  
        try {
          // model.value is the raw JSON from the Umbraco property
          if ($scope.model.value) {
            parsedData = JSON.parse($scope.model.value);
          }
        } catch (err) {
          console.error("Invalid JSON in property:", err);
        }
  
        // Render the React app, passing parsedData
        ReactDOM.render(
          React.createElement(AnswersTable, { data: parsedData }),
          document.getElementById("react-json-editor-root")
        );
      }
  
      init();
    });
  
    // A simple React component that displays data.answers in a table
    function AnswersTable(props) {
      const answers = props.data.answers || [];
  
      return React.createElement(
        "table",
        { className: "umb-table" },
        [
          React.createElement("thead", {}, 
            React.createElement("tr", {}, [
              React.createElement("th", {}, "Question ID"),
              React.createElement("th", {}, "Question Text"),
              React.createElement("th", {}, "Selected Answer"),
              React.createElement("th", {}, "Score")
            ])
          ),
          React.createElement("tbody", {},
            answers.map((answer, index) => 
              React.createElement("tr", { key: index }, [
                React.createElement("td", {}, answer.questionId),
                React.createElement("td", {}, answer.questionText),
                React.createElement("td", {}, answer.selectedAnswer),
                React.createElement("td", {}, answer.score)
              ])
            )
          )
        ]
      );
    }
  </script>
  